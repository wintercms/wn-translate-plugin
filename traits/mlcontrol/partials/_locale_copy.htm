<?php if (!config('winter.translate::disable_copy', false)): ?>
<!-- Language Copy Dropdown -->
<div class="dropdown ml-copy-dropdown">
    <button class="icon-copy btn ml-copy-btn" data-toggle="dropdown" type="button">
    </button>
    <ul class="dropdown-menu pull-right ml-copy-dropdown-menu" role="menu">
        <?php foreach ($locales as $code => $name): ?>
        <li role="presentation">
            <a role="menuitem" tabindex="-1" data-copy-locale="<?= $code ?>" href="javascript:;">
                <?= e(trans('winter.translate::lang.locale.copy_from', ['locale' => $name])); ?>
            </a>
        </li>
        <?php endforeach ?>
    </ul>
</div>

<!-- NOTE: popup for choosing which method of translation -->
<div class="control-popup modal ml-modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body">
                <?php $widgetId = $this->getId(); ?>

                <form>
                    <div class="form-group">
                        <fieldset>
                            <h3 class="lang-code-display">
                                <span data-display-locale></span>â†’<span data-display-active-locale></span>
                            </h3>
                            <p><?= e(trans('winter.translate::lang.locale.translate_method')); ?></p>

                            <?php
                                $default = strtolower($defaultProvider ?? '');
                                $isStandard = ($default === '' || $default === 'standard');

                                // some FormWidgets are not machine translatable, eg. MediaFinder
                                $translatable = $autoTranslatable ?? true;
                            ?>

                            <div class="form-group">
                                <select name="translation_provider_<?= $widgetId ?>" class="form-control">

                                    <option value="standard" <?= $isStandard ? 'selected' : '' ?>>
                                        <?= e(trans('winter.translate::lang.locale.standard')); ?>
                                    </option>

                                    <?php if ($translatable) { ?>
                                        <?php foreach ($providers as $providerName => $providerConfig): ?>
                                            <?php $selected = ($default === strtolower($providerName)) ? 'selected' : ''; ?>
                                            <option value="<?= $providerName ?>" <?= $selected ?>>
                                                <?= ucfirst($providerName) ?>
                                            </option>
                                        <?php endforeach ?>
                                    <?php } ?>
                                </select>
                            </div>

                            <div class="modal-footer">
                                <button data-selected-locale="" type="button" class="btn btn-primary"
                                    data-dismiss="modal"><?= e(trans('winter.translate::lang.locale.copy_button')); ?></button>
                            </div>
                        </fieldset>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<?php endif; ?>
